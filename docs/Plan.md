# План автоматизации
# Тестовые сценарии:
**Валидные значения:**
* Номер карты: 16 цифр в формате **** **** **** ****
* Месяц: двузначное число от 01 до 12 (если год совпадает с текущим годом, то месяц должен быть не ранее текущего месяца)
* Год: 2 последние цифры года, начиная с текущего, не более 5ти лет от текущего года
* Владелец: буквы на латинице, пробел, дефис, апостроф
* CVC/CVV: 3 цифры
  **Карты, представленные для тестирования (файл data.json):**
* 4444 4444 4444 4441, status APPROVED
* 4444 4444 4444 4442, status DECLINED

**Предусловие:** Сценарии для вкладок "Купить" и "Купить в кредит" аналогичны, поэтому необходимо сначала выполнить переход в одну из этих вкладок

**Позитивные сценарии:**

1. Покупка тура по карте, для которой задан статус APPROVED:
   1.1. С именем и фамилией владельца на латинице:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об успешной оплате

1.2. С фамилией владельца с дефисом:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Petrova-Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об успешной оплате

1.3. С двойным именем владельца:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Anna Maria Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об успешной оплате

1.4. С фамилией владельца с апострофом:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Scarlett O'Hara)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об успешной

1.5. С текущим месяцем окончания срока действия карты:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" номер текущего месяца

Ввести в поле "Год" 2 последние цифры текущего года

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об успешной оплате

2. Покупка тура по карте, для которой задан статус DECLINED:

Ввести в поле "Номер карты" номер карты, для которой задан статус DECLINED (4444 4444 4444 4442)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* появляется сообщение от банка об отказе в проведении оплаты

**Негативные сценарии:**
1. Ввод невалидного номера карты:

1.1. Ввод номера карты менее 16 цифр:


Ввести в поле "Номер карты" 15 цифр (например, 4444 4444 4444 444)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Номер карты" появляется ошибка "Неверный формат"

1.2. Ввод номера карты более 16 цифр:

Ввести в поле "Номер карты" 17 цифр (например, 4444 4444 4444 4441 1)

*Ожидаемый результат:* 17-й символ не вводится в поле, значение карты остается 16-значным

1.3. Ввод в номере карты букв и символов, кроме цифр:

С буквой:

Ввести в поле "Номер карты" букву (например, s)

Ожидаемый результат: буква не вводится, поле остается пустым

Со спецсимволом:

Ввести в поле "Номер карты" символ (например, %)

*Ожидаемый результат:* символ не вводится, поле остается пустым

2. Ввод невалидной даты: 

2.1. Ввод прошлого года:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" 2 последние цифры прошлого года (на данный момент, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Год" появляется сообщение "Истек срок действия карты"

2.2. Ввод прошедшего месяца текущего года:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" значение прошедшего месяца текущего года (например, 12)

Ввести в поле "Год" 2 последние цифры текущего года (на данный момент, 22)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Месяц" появляется сообщение "Неверно указан срок действия карты"

2.3. Ввод месяца одной цифрой:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" значение месяца одной цифрой (например, 8)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Месяц" появляется сообщение "Неверный формат"

2.4. Ввод даты более 2 цифр:

Ввести в поле "Месяц" значение месяца тремя цифрами (например, 088)

*Ожидаемый результат:* 3-я цифра не вводится, месяц остается из 2 цифр

2.5. Ввод даты в виде символов, кроме цифр:

Ввести в поле "Месяц" букву (например, u)

*Ожидаемый результат:* буква не вводится, поле остается пустым

Ввести в поле "Месяц" спецсимвол (например, #)

*Ожидаемый результат:* символ не вводится, поле остается пустым

2.6 Ввод 00 в поле месяц

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" значение 00

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат: под полем "Месяц" появляется сообщение "Неверный формат"

2.7 Ввод 00 в поле год
Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" значение месяца одной цифрой (например, 8)

Ввести в поле "Год" значение 00

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат: под полем "Год" появляется сообщение "Неверный формат"

3. Ввод невалидный данных владельца:

3.1. Ввод данных владельца на кириллице:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" буквы на кириллице (например, Ольга Иванова)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Владелец" появляется ошибка "Неверный формат"

3.2. Ввод данных владельца с цифрами:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" цифры (например, 111111)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Владелец" появляется ошибка "Неверный формат"

3.3. Ввод данных владельца со спецсимволами, кроме дефиса и апострофа:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" спецсимволы (например, Olga Ivanova+)

Ввести в поле "CVC/CVV" 3 цифры (например, 123)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Владелец" появляется ошибка "Неверный формат"

4. Ввод невалидного CVC/CVV:

4.1. Ввод менее 3 цифр в поле "CVC/CVV":

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 2 цифры (например, 12)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "CVC/CVV" появляется ошибка "Неверный формат"

4.2. Ввод более 3 цифр в поле "CVC/CVV":

Ввести в поле "CVC/CVV" 4 цифры (например, 1234)

*Ожидаемый результат:* 4-я цифра не вводится, значение остается трехзначным

4.3 Ввод 0 в поле "CVC/CVV":

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" валидное значение (например, Olga Ivanova)

Ввести в поле "CVC/CVV" 000

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "CVC/CVV" появляется ошибка "Неверный формат"

5. Пустые поля:

Нажать кнопку "Продолжить"

*Ожидаемый результат:*

* под полем "Номер карты" появляется ошибка "Поле обязательно для заполнения"

* под полем "Месяц" появляется сообщение "Поле обязательно для заполнения"

* под полем "Год" появляется сообщение "Поле обязательно для заполнения"

* под полем "Владелец" появляется ошибка "Поле обязательно для заполнения"

* под полем "CVC/CVV" появляется ошибка "Поле обязательно для заполнения"

5.1 Оставить пустое поле "Владелец"

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца (например, 08)

Ввести в поле "Год" валидное значение года (например, 23)

Ввести в поле "Владелец" оставить пустое

Ввести в поле "CVC/CVV" 2 цифры (например, 12)

Нажать кнопку "Продолжить"

*Ожидаемый результат:* под полем "Владелец" появляется ошибка "Поле обязательно для заполнения"

Запросы в базу:

1. Покупка тура по карте, для которой задан статус APPROVED:

Ввести в поле "Номер карты" номер карты, для которой задан статус APPROVED (4444 4444 4444 4441)

Ввести в поле "Месяц" валидное значение месяца

Ввести в поле "Год" валидное значение года

Ввести в поле "Владелец" валидное значение

Ввести в поле "CVC/CVV" 3 цифры

Нажать кнопку "Продолжить"

*Ожидаемый результат:* в базе появляется запись со статусом APPROVED

2. Покупка тура по карте, для которой задан статус DECLINED:

Ввести в поле "Номер карты" номер карты, для которой задан статус DECLINED (4444 4444 4444 4442)

Ввести в поле "Месяц" валидное значение месяца

Ввести в поле "Год" валидное значение года

Ввести в поле "Владелец" валидное значение

Ввести в поле "CVC/CVV" 3 цифры

Нажать кнопку "Продолжить"

*Ожидаемый результат:* в базе появляется запись со статусом DECLINED

3. Покупка тура по карте, которой нет в базе:

Ввести в поле "Номер карты" любые 16 цифр

Ввести в поле "Месяц" валидное значение месяца

Ввести в поле "Год" валидное значение года

Ввести в поле "Владелец" валидное значение

Ввести в поле "CVC/CVV" 3 цифры

Нажать кнопку "Продолжить"

*Ожидаемый результат:* в базе ничего не меняется

**Примечание**: так как заявлена поддержка двух СУБД, последние 3 теста необходимо провести для каждой СУБД по очереди

# Перечень используемых инструментов

* IntelliJ IDEA 2022.1.2 (Community Edition) - функциональная среда разработки, подходящая для многих языков программирования;

* Java, version 11.0.17 - язык программирования;

* Gradle - система автоматической сборки;

* JUnit5 - среда тестирования для приложений Java;

* Selenide - инструмент для автоматизации действия пользователя в браузере;

* Lombok - плагин для автоматической генерации кода, позволяет сократить количество кода;

* Allure - система для создания отчетов о выполнении авто-тестов;

* Faker - библиотека для автогенерации тестовых данных;

* MySQL, PostgreSQL - СУБД;

* Docker - платформа для контейнеризации (для СУБД);

* GitHub - система контроля версий для хранения проекта.

# Перечень и описание возможных рисков при автоматизации

* Временные затраты на настройку Docker и CI.

* Большие затраты времени на автоматизацию, возможно некоторые тесты быстрее провести вручную.

* Неверный выбор инструментов для тестирования. Зависимость от таких инструментов.

* Тесты могут не покрывать всех возможных негативных сценариев - всегда есть возможность, что пользователь поведет себя так, как мы не можем предвидеть.

* Необходимость в значительных технических ресурсах (характеристики компьютера, операционной системы и т.д.) для корректной и быстрой работы всех используемых инструментов. Вероятность технических проблем.

# Интервальная оценка с учётом рисков в часах

* Настройка тестового окружения - 8
* Написание и отладка автотестов - 36
* Прогон тестов и заведение issue - 8
* Устранение замечаний - 16
* Подготовка отчета по итогам автоматизированного тестирования - 8

**Итого:** 76 часов

# План сдачи работ
Написание автотестов, проведение тестирования - 24.01.2023
Подготовка отчетной документации - 28.01.2023





